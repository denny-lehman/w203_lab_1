---
title: "Difficulty Voting in the 2020 Presidential Election"
author: 'Team03: Savita Chari, Denny Lehman, Tymon Silva'
date: "10/16/2021"
output:
  bookdown::pdf_document2: 
    toc: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r load packages, echo=FALSE, warning=FALSE, message=FALSE}
library(plyr)
library(dplyr)
library(ggplot2) 
library(knitr)
library(tidyverse) 
library(haven)
library(gridExtra)
theme_set(theme_bw())
options(tinytex.verbose = TRUE)
```

```{r DATA Read, echo=FALSE, include=FALSE}
anes_2020_full_data <- read_csv("anes_timeseries_2020_csv_20210719.csv")
```

```{r DATA WRANGLING, echo=FALSE, include=FALSE}
anes_2020_subset <- anes_2020_full_data %>%
  select(Case_Id = V200001
         , Sample_Type = V200003
         , Eligibility_Concerns = V200005
         , Eligibility_Outcome = V200006
         , Validation_Study_Outcome = V200008
         , Did_Vote = V202066
         , Political_Party = V201231x
         , Voting_Level_Difficulty_Code = V202119
         )%>%
  filter()

#anes_2020_subset
```

```{r DATA WRANGLING/FILTERING , echo=FALSE, include=FALSE}
anes_2020_subset_filtered <- anes_2020_subset%>%
  select(Case_Id
         , Sample_Type
         , Eligibility_Concerns
         , Eligibility_Outcome
         , Validation_Study_Outcome
         , Did_Vote
         , Political_Party
         , Voting_Level_Difficulty_Code
         )%>%
  filter(Voting_Level_Difficulty_Code > 0 
         & Eligibility_Concerns != 3
         & Validation_Study_Outcome != 6
         & Political_Party > 0
         & Political_Party != 4
         )

#anes_2020_subset_filtered
```

```{r final dataset, echo=FALSE}
ANES <- anes_2020_subset_filtered %>% 
  mutate(
    Political_Party = case_when(
      Political_Party %in% c(1, 2, 3) ~ 'Democrat', 
       Political_Party %in% c(5, 6, 7) ~ 'Republican',
      )
    )
ANES
```

# Introduction
The 2020 election, held on November 3, recorded the highest voter turnout in our election history as well as the highest number of mail-in voters.\footnote{https://www.newsweek.com/election-2020-voter-turnout-67-percent-highest-120-years-1544552, https://www.newsweek.com/highest-voter-turnouts-history-us-elections-1545235} And, although more participation is generally seen as a good thing, the 2020 voting experience left many of us concerned and troubled, casting a shadow on the safety, reliability, and structure of the voting process. Videos of citizens showing up armed with weapons at the voting booths, stories of locals intimidating and harassing voters standing in line, and reports of issues with mail-in ballot boxes, seemed all too common this last general election. Is this just the media hyping the drama around the voting process or did certain groups of voters really experience increased difficulty voting this last election? The situation has spurred many discussions around the voting process and how it will look in the future.

In this report, we answer a basic, but relevant question: 

\begin{quote}
  \textit{Did Democratic voters or Republican voters experience more difficulty voting in the 2020 election?}
\end{quote} 

We focus our analysis not only around the frequency at which Democrats and Republicans experienced difficulties voting but the level of difficulty expressed among these two groups as well. In answering this question, we can contribute to the conversation and help guide strategies that reform and/or improve the voting process. We must protect our voters to ensure a fair election takes place.

# Data and Methodology
Our data comes from the 2020 Time Series Study performed by the survey firm, Westat, and generated by the American National Election Studies (ANES). The data consists of responses from both a pre and post election survey, in which participants were interviewed prior to election date and contacted again to capture their experiences and opinions shortly after the election had concluded. Addresses across the US were randomly drawn from a USPS computerized delivery sequence file and the selected addresses were sent a series of letters to recruit a household member. All mailers offered financial incentives to participate in the survey. The study involved three modes of response: web -only, mixed web, and mixed video (live video interviewing via Zoom). The pre-election survey was conducted between August 18, 2020 and November 3, 2020. The study re-interviewed the same respondents  in the post-election survey between November 8, 2020 and January 4, 2021. The overall response rate for the pre-election survey and the post-election survey was 40.9% and and 87.9%, respectively.

Additionally, all sample members who completed the post-election survey from the ANES 2016 Time Series Study were invited to participate in the 2020 survey online. This survey data was merged using the case ID variable to join the two datasets.

In order to operationalize the concept of difficulty voting, we first identify the Democratic and Republican voters. Per guidance from an article written by political scientists\footnote{https://www.sciencedirect.com/journal/electoral-studies}, we group voters into political parties by the direction they "lean." In other words, a voter that indicates they "lean democratic" is classified as a Democrat and vice versa. The tables below describe these distributions.
## Add concern with sample universe for difficulty question

```{r Table, echo=FALSE}
tbl <- table(ANES$Political_Party)
tbl_p <- prop.table(tbl)


df <- data.frame(tbl, tbl_p)
df <- subset(df, select=-c(Var1.1))
df <- df %>% 
  rename(
    Party = Var1,
    Frequency = Freq,
    Proportion = Freq.1,
    )


summary_table <- kable(
    df,
    digits = 2,
    caption = 'Distribution of Political Party',
    booktabs = TRUE,
)

summary_table
```

Table 1 shows the frequencies of Democrats and Republicans in our dataset. And, Table 1 shows the proportion of each group, which is roughly 54% Democrat and 46% Republican.

The key variable for our analyses is the question pertaining to how difficult it was for the respondent to vote. Responses were collected on a 5-point Likert scale that ranged from 1 ("Not difficult at all") to 5 ("Extremely difficult"). In order to operationalize the frequency in which Democrats had experienced difficulty voting compared to Republicans that experienced difficulty, we grouped voters in a binary fashion; as either had difficulty voting or had no difficulty at all and compared their means. 

```{r mean comparison, echo = FALSE, message=FALSE}
ANES_mean <- ANES %>%
  mutate(
    Voting_Level_Difficulty_Code = case_when(
      Voting_Level_Difficulty_Code > 1 ~ 1, 
       Voting_Level_Difficulty_Code == 1 ~ 0,
      )
    )

table_mean <- ANES_mean %>%
  group_by(Political_Party) %>%
  summarise_at(vars(Voting_Level_Difficulty_Code), list(Had_Difficulty_Voting_Mean = mean))

plt1 <- ggplot(data=table_mean, aes(x=Political_Party, y=Had_Difficulty_Voting_Mean, fill=Political_Party))+   geom_bar(stat="identity")+
  scale_fill_manual(values=c("#1c2e4a", "#900d09"))+
  theme(legend.position = "none"
        , panel.grid.major = element_blank()
        , panel.grid.minor = element_blank()
        )

```

```{r Voting Level Difficulty comparison, echo = FALSE, message=FALSE}
ANES_levels <- ANES %>%
  group_by(Political_Party) %>%
  summarise_at(vars(Voting_Level_Difficulty_Code), list(Voting_Level_Difficulty_Code = mean))

plt2 <- ggplot(data=ANES_levels, aes(x=Political_Party, y=Voting_Level_Difficulty_Code, fill=Political_Party))+   geom_bar(stat="identity")+
  scale_fill_manual(values=c("#1c2e4a", "#900d09"))+
  theme(legend.position = "none"
        , panel.grid.major = element_blank()
        , panel.grid.minor = element_blank()
        )
```

```{r plot on same line, echo = FALSE, message=FALSE}
grid.arrange(plt1, plt2, ncol=2)

```

First, let's determine if one party is more likely to experience difficulty voting than the other. To test this, we can use a two-sample t-test. The null hypothesis for this t-test can be expressed as follows:

\begin{quote}

\textbf{Null Hypothesis:} \textit{The probability that a Democratic voter experiences some difficulty during their voting process is equal to the probability that a Repoblican voter experiences some difficulty during their voting process.}

\end{quote}

For this t-test, the following assumptions must be true:

\begin{enumerate}
  \item \textbf{i.i.d. data}  First, data must be generated via an iid process (Independent and Identically Distributed). The ANES 2020 survey merged in data from a panel, which was comprised of participants in the ANES 2016 survey. This is definitely a concern when validating that the data to be identically distributed, since the year in which these surveys were administered differs greatly. However, for the purposes of this study, we will assume the impact of this possible violation is negligible. 

  \item \textbf{Metric scale}  Even though our raw data includes ordinal variables, we have transformed them to binary form.  A binary variable qualifies as metric as there is only a single interval, which goes from zero to 1.
  
  \item \textbf{Sufficient normality}  
\end{enumerate}
# Results
```{r unpaired two sample t-test , echo=TRUE, results='hide'}

t.test(ANES_mean$Voting_Level_Difficulty_Code ~ ANES_mean$Political_Party)

```



```{r prep for test , echo=FALSE, include=FALSE}
anes_2020_subset_final_wilcox <- anes_2020_subset_filtered %>% 
  mutate(
    Political_Party = case_when(
      Political_Party %in% c(1, 2, 3) ~ 'Democrat', 
       Political_Party %in% c(5, 6, 7) ~ 'Republican',
      )
    )
```

```{r Wicoxon rank-sum test, echo=TRUE, results='hide'} 
test <- wilcox.test(ANES$Voting_Level_Difficulty_Code ~ ANES$Political_Party)
```

The results of the Wicoxon Rank-Sum test conclude that the probability of the level of difficulty voting for Democrats is less the the level of difficulty voting for Republicans IS NOT equal to the probability of the level of difficulty voting for Democrats is greater than the the level of difficulty voting for Republicans (W = 4058825, p-value = 0.005804). In practical terms, this means there was a statistically significant difference in the experienced level of difficulty voting between the two political parties. 

```{r run test, echo=FALSE, results='hide'}
test
```